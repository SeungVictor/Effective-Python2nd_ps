# Better way 04. C 스타일 형식 문자열 str.format과 쓰기보다는 f-string을 통한 인터폴레이션을 사용하라

#### 42쪽

* Created : 2022/08/06  
 
<br>
파이썬 코드에서는 문자열을 많이 사용한다. <br>

**형식화(formatting)** 는 미리 정의된 문자열에 데이터 값을 끼워 넣어서 사람이 보기 좋은 문자열로 저장하는 과정이다.<br>
파이썬에서는 네 가지 방식으로 형식화 할 수 있다. 
<br><br>

## % 형식화 연산자(C스타일)
% 왼쪽에 들어가는 미리 정의된 텍스트 템플릿을 형식 문자열이라고 부른다.
템플릿에 끼워 넣을 값들을 연산자의 오른쪽에 단일 값(값이 하나인 경우)이나 tuple(값이 여럿인 경우)로 지정한다.
```python
a = 0b10111011
b = 0xc5f
print('이진수: &d, 십육진수: %d % (a, b))
>>>
이진수: 187, 십육진수: 3167
```
파이썬의 형식 문자열은 연산자 왼쪽에 있는 값을 끼워 넣을 자리를 표현하기 위해 [%d, %s, %x, %f](https://planharry.tistory.com/11)등 c언어의 printf함수에서 사용 할 수 있는 대부분의 형식 지정자를 지원한다.
위 C스타일의 형식 문자열은 네가지 문제점이 있다.
* (1) : 형식화 식에서 오른쪽에 있는 tuple 내 데이터 값의 순서를 바꾸거나 값의 타입을 바꾸면 타입 변환이 불가능
* (2) : 형식화를 하기 전에 값을 살짝 변경 해야한다면 식을 읽기가 어려워짐 
* (3) : 형식화 문자열에서 같은 값을 여러 번 사용하고 싶다면 튜플에서 같은 값을 여러 번 반복해야 함
<br>
-> (1),(3)문제를 해결하기 위해 %연산자에 튜플 대신 딕셔너리를 사용할 수있는 기능이 있음 
<br>
-> 그러나 딕셔너리 사용할 경우 (2)문제가 더 심각해지고 (4)문제를 야기함
* (4) 형식화 식에 딕셔너리를 사용하면 각 키를 최소 두 번 반복하게되어 번잡해짐((3)과 같은 문제)
<br>

## format, str.format
조금 나아진 방법으로 format str.format 기능 도입하였으나 (2),(4)문제는 완전해결되지않음

## 인터폴레이션을 통한 형식 문자열(f-string)
위 모든 문제를 해결함 
```python
key ='아보카도'
value = 10.234234

f_string = f'{key:<10} = {value:.2f}'
c_tuple = '%-10s = %.2f' % (key, value)
str_args = '{:<10} = {:.2f}'.format(key, value)
str_kw = '{key:<10} = {value:.2f}'.format(key=key, value=value)
c_dict = '%(key)-10s = %(value).2f' % {'key': key, 'value': value}

print(f_string)
print(c_tuple)
print(str_args)
print(str_kw)
print(c_dict)
>>>
아보카도       = 10.23
아보카도       = 10.23
아보카도       = 10.23
아보카도       = 10.23
아보카도       = 10.23
```
<br>
<br>
<br>

#### 요점
* %연산자를 사용하는 C스타일 형식화 문자열은 여러 가지 단점과 번잡함
* str.format 메서드는 형식 지정자 미니 언어에서 유용한 개념 몇 가지를 새로 제공했지만 문제 완전히 해결못함
* f-string은 값을 문자열 안에 넣는 새로운 구문으로 간결하고 위치지정자 안에 임의의 파이썬 식을 직접 포함시킬 수 있으므로 매우 강력함

