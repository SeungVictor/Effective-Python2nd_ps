# Better way 06. 인덱스를 사용하는 대신 대입을 사용해 데이터를 언패킹하라

#### 61쪽

* Created : 2022/08/22  
<br>
파이썬에는 값으로 이뤄진 불변(immutable) 순서쌍을 만들어 낼 수 있는 tuple 내장 타입이 있다. 가장 짧은 튜플은 딕셔러니 키-값 쌍과 비슷하게 두 값으로 이뤄진다.

```python
snack_calories = {
    '감자칩': 140,
    '팝콘': 80,
    '땅콩': 190,
}
items = tuple(snack_calories.items())
print(items)
>>>
(('감자칩', 140), ('팝콘', 80), ('땅콩', 190))
```
튜플에 있는 값은 숫자 인덱스를 사용해 접근 할 수 있지만 일단 튜플이 만들어지면, 인덱스를 통해 새 값을 대입해서 튜플을 변경할 수는 없다.
<br>
파이썬에서는 _**언패킹(unpacking)**(풀기)_ 라는 구문이 있는데 한 문장 안에서 여러 값을 대입 할 수 있다.
튜플을 변경하련느 코드와 비슷하지만 매우 다르게 작동한다. 예를 들어 튜플이 쌍이라는 사실을 알고 있으면 인덱스 값으로 접근하는 대신 이 튜플을 두 변수 이름으로 이뤄진 튜플에 대입 할수 있다.

```python
item = ('호박엿', '식혜')
first, second = item #unpacking
print(first, '&', second)

>>>
호박엿 & 식혜

```
오름차순 정렬 알고리즘에서 인덱스와 임시변수를 사용해 list의 두위치에 있는 원소를 맞바꾸는것을 언패킹을 활용하면 좀더 간결하게 작성 가능하다.

```python
#인덱스와 임시변수 사용
def bubble_sort_index(a):
    for _ in range(len(a)):
        for i in range(1, len(a)):
            if a[i] < a[i-1]:
                temp = a[i]
                a[i] = a[i-1]
                a[i-1] = temp
#언패킹 사용
def bubble_sort_up(a):
    for _ in range(len(a)):
        for i in range(1, len(a)):
            if a[i] < a[i-1]:
                a[i-1], a[i] = a[i], a[i-1] #맞바꾸기
                print(a)

names = ['프레즐', '당근', '쑥갓', '베이컨']
bubble_sort_index(names)
#print(names)

names = ['프레즐', '당근', '쑥갓', '베이컨']
bubble_sort_up(names)
# print(names)
>>>
['당근', '프레즐', '쑥갓', '베이컨']
['당근', '쑥갓', '프레즐', '베이컨']
['당근', '쑥갓', '베이컨', '프레즐']
['당근', '베이컨', '쑥갓', '프레즐']
```
대입문의 우항 a[i], a[i-1] 계산시 0번째 라면 당근[1], 프레즐[1-1]이 이름이 없는 새로운 임시 튜플에 저장되고 
그 후 대입문의 좌항에 있는 언패킹 패턴 (a[i-1], a[i])를 통해 임시 튜플에 있는 값(당근, 프레즐)이 각각 a[1-1], a[1]에 저장되어
당근이 첫번째 a[0]으로 프레즐이 두번째 a[1]로 바뀌고 임시튜플은 사라진다. 1번째는 쑥갓[2], 프레즐[2-1]이 a[2-1], a[2]에 저장되어
쑥갓이 두번째 a[1]으로 프레즐이 세번째 a[2]로 바뀌고 임시튜플은 사라진다.
<br>
인덱싱으로 이터레이션하는 코드와 언패킹을 사용하는 코드를 비교해보자.

```python
snacks = [('베이컨', 350), ('도넛', 240), ('머핀', 190)]
for i in range(len(snacks)):
    item = snacks[i]
    name = item[0]
    calories = item[1]
    print(f'#{i+1}: {name}은 {calories}칼로리 입니다')

for rank, (name, calories) in enumerate(snacks, 1):
    print(f'#{rank}: {name}은 {calories}칼로리 입니다')
>>>
#1: 베이컨은 350칼로리 입니다
#2: 도넛은 240칼로리 입니다
#3: 머핀은 190칼로리 입니다
#1: 베이컨은 350칼로리 입니다
#2: 도넛은 240칼로리 입니다
#3: 머핀은 190칼로리 입니다

```
일반적으로는 인덱스를 사용해 접근할 필요가 없다. 파이썬은 list구조, 함수 인자, 키워드 인자, 다중 반환 값 등에 대한 언패킹 기능도 제공한다.


<br>

#### 요점

* 파이썬은 한 문장 안에서 여러 값을 대입 할 수 있는 언패킹이라는 특별한 문법을 제공한다.
* 파이썬 언패킹은 일반화돼 있으므로 모든 이터러블(여러계층으로 내포된 경우도 포함)에 적용 할 수 있다.
* 인덱스를 이용해 시퀀스 내부에 접근하는 대신 언패킹을 사용해 시각적인 잡음을 줄이고 코드를 더 명확하게 만들라.
